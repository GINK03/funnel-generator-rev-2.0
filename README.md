# Funnel Rev2

## 課題点
既存の提供していただいているファネルにはこのような、問題点がありました。
 1. 隠れマルコフモデルで表現さるので、キーワードからキーワードへの遷移が確率値として表現される、かつ、ネットワーク構造をもつというファネルのような低次元表現に向いていない
 2. 人間の行動には、ランダムネスが潜在的に存在することを仮定していいはずで、マルコフモデルだとあらゆる可能性の幅を全探索するので、視覚的・感覚的に理解しやすいという閾値を各ステップごとに定義する必要がある
 
## 提案
人間が生成する文字列（文章など）を効率的にベクトル化する技術を用いることで、Word2Vecのような意味の類似度を計算することが可能になります。  
意味の類似度の解釈は、ある一定の文字の周りに存在し得る文字が似ていることが表現可能なSkipGramのアルゴリズムを前提とするとすることができ、
結果的にデータセットをWEB上のユーザ行動を文字列と置き換えることで、ある行動がコンバージョンと共起しやすいか（ある合同がコンバージョンの発生を説明しうるか）と解釈できます  

これにより、コンバージョンが、どの接触していたキーワードにより引き起こされたかどうかを定量的に知ることができます

## 実験方法
1. TreasureDataのデータ過去２年分
2. Conversionが定義されているアカウントに限定
3. AWS Elastic MapReduceでユーザが触れたキーワードをユーザごとに直列化して、fasttextで処理できる状態にする

## 結果・定性的な検証
例えば、プラセンタを販売している会社のデータの場合、CVからのcosine距離はこのようになる
```
銀座ステファニー化粧品株式会社 CV 1.0
銀座ステファニー化粧品株式会社 通販 0.999742981243
銀座ステファニー化粧品株式会社 コスメ 0.999736752912
銀座ステファニー化粧品株式会社 プラウディン 0.999726698872
銀座ステファニー化粧品株式会社 通信販売 0.999724512911
銀座ステファニー化粧品株式会社 Proudin 0.999709792321
銀座ステファニー化粧品株式会社 プラセンタ100 0.99969709285
銀座ステファニー化粧品株式会社 スペシャル定期プラセンタ100CORE100粒毎月 0.999685805837
銀座ステファニー化粧品株式会社 プラウディンオンラインショップ 0.999681729656
銀座ステファニー化粧品株式会社 サプリ 0.999674153933
銀座ステファニー化粧品株式会社 プラセンティスト 0.999671896542
銀座ステファニー化粧品株式会社 ポイント 0.999630739074
銀座ステファニー化粧品株式会社 カート 0.999621948144
銀座ステファニー化粧品株式会社 定期購入 0.999614575516
...

銀座ステファニー化粧品株式会社 低分子 0.998930452882
銀座ステファニー化粧品株式会社 美容 0.998888872607
銀座ステファニー化粧品株式会社 初回限定特別価格 0.998851382136
銀座ステファニー化粧品株式会社 トライアルポイント 0.998808364073
銀座ステファニー化粧品株式会社 SEARCH_+銀座ステファニー 0.998759610787
銀座ステファニー化粧品株式会社 ランキング 0.998419123285
銀座ステファニー化粧品株式会社 SEARCH_高濃度 0.997991680256
銀座ステファニー化粧品株式会社 フムスエキス 0.997789708371
銀座ステファニー化粧品株式会社 SEARCH_+飲む 0.993744694223
銀座ステファニー化粧品株式会社 成分 0.966488529368
銀座ステファニー化粧品株式会社 オーデュナチュール 0.939465657707
```
このように、今回データインテリジェンスチームが見出した、成分の検索が遠くにあり、具体的な製品名は近くにあるということがわかった。　　

これは、定性的に人間が見出した結果と一致しており、有効であると考えられる
　
## メリット  
計算が楽、コンバージョンポイントが分かれば良い

## デメリット
ValueTrackを導入してもらう必要があります
